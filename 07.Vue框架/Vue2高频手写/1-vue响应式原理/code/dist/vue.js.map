{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(value) {  // value为观测到的数据，即对应传入的data\n    // 需要对value属性重新定义\n    this.walk(value)\n  }\n\n  walk(data) {\n    // 将对象中的所有key重新用defineReactive定义成响应式的\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key ])\n    })\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(newValue) {\n      if (newVlue === value) return\n      value = newValue\n    }\n  })\n}\n\nexport function observe(data) {\n  // 只能观测对象类型，非对象类型无法观测\n  if (typeof data !== 'object' || data === null) {\n    return\n  }\n\n  // 通过类实现对数据的观测， 类可以方便扩展，会产生实例，实例可以作为一个唯一标识\n  return new Observer(data)\n}","// vue的数据  data computed watch\n\nimport { observe } from \"./observer/index\"\n\nexport function initState(vm) {\n  // 将所有数据都定义到vm属性上，并且后续更改需要触发视图更新\n  const opts = vm.$options  // 获取用户传入的属性\n  if (opts.data) {  // 数据的初始化\n    initData(vm)\n  }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newValue) {\n      vm[source][key] = newValue\n    }\n  })\n}\n\nfunction initData(vm) {\n  // 数据劫持\n  // console.log(vm)\n  let data = vm.$options.data\n\n  // 判断data类型,如果是函数，获取函数返回值作为对象  this指向当前实例\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n\n  // 通过vm._data获取劫持后的数据，用户就可以拿到_data了\n  // 将_data中的数据全部放到vm上\n  for (const key in data) {\n    proxy(vm, '_data', key )  // vm.name  <=> vm._data.name\n  }\n\n  // 观测对象\n  observe(data)\n}","import { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        // console.log(options);\n        const vm = this;\n        vm.$options = options;   // 实例上有个属性$options  表示的是用户传入的所有属性\n        // 初始化状态\n        initState(vm)\n    }\n}","// Vue2.0中，本质是一个构造函数\n\nimport { initMixin } from \"./init\"\n\nfunction Vue(options) {\n    this._init(options)  // 当用户new Vue的时候， 就调用init方法进行vue的初始化操作\n}\n\ninitMixin(Vue)\n\nexport default Vue"],"names":["Observer","value","walk","data","Object","keys","forEach","key","defineReactive","defineProperty","get","set","newValue","newVlue","observe","initState","vm","opts","$options","initData","proxy","source","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}